nlp_engine_name: spacy
models:
  -
    lang_code: en
    model_name: en_core_web_lg  # Using large model (trf has dependency issues on Windows)
    # model_name: en_core_web_trf  # Transformer: more accurate but requires compatible PyTorch

ner_model_configuration:
  model_to_presidio_entity_mapping:
    # ---- Core Person Entities ----
    PER: PERSON
    PERSON: PERSON
    HCW: PERSON
    
    # ---- Contact / Communication ----
    EMAIL: EMAIL_ADDRESS
    PHONE: PHONE_NUMBER

    # ---- Address / Location ----
    # NOTE: LOCATION entities commented out to avoid false positives (e.g., "US" as pronoun)
    # We rely on custom recognizers for ADDRESS and UK_POSTCODE detection
    # FAC: LOCATION
    # GPE: LOCATION
    # LOC: LOCATION
    ADDRESS: ADDRESS
    STREET_ADDRESS: ADDRESS
    STREET_NAME: ADDRESS
    HOUSE_NUMBER: HOUSE_NUMBER
    POSTCODE: UK_POSTCODE
    POSTAL_CODE: UK_POSTCODE

    # ---- Credentials / Codes ----
    PASSWORD: PASSWORD
    VERIFICATION_CODE: VERIFICATION_CODE
    PASSCODE: PASSWORD

    # ---- Other Entities ----
    AGE: AGE

  low_confidence_score_multiplier: 0.4

  low_score_entity_names:
    -  # Empty list for now (future low-confidence entities can go here)

  labels_to_ignore:
    # Ignored to reduce false positives or low-value extractions
    - CARDINAL
    - EVENT
    - LANGUAGE
    - LAW
    - ORDINAL
    - PERCENT
    - PRODUCT
    - QUANTITY
    - WORK_OF_ART
    - NUMBERS
    - NUMBER
    - DATE
    - TIME
    - MONEY
    - ORG

# ============================================================================
# DENY LIST - Comprehensive false positive prevention
# ============================================================================
# This single list serves two purposes:
#   1. EXACT MATCH: Never redact if detected text exactly matches these words
#   2. VALIDATION: For PERSON entities, validate using conversational ratio
#
# Words are grouped logically for maintainability
# ============================================================================

deny_list:
  # === Pronouns & Possessives ===
  - "I"
  - "I'M"
  - "IM"
  - "I'VE"
  - "IVE"
  - "I'LL"
  - "ILL"
  - "MY"
  - "ME"
  - "YOU"
  - "YOUR"
  - "YOU'RE"
  - "YOURE"
  - "YOU'LL"
  - "YOULL"
  - "YOU'VE"
  - "YOUVE"
  - "HE"
  - "HE'S"
  - "HES"
  - "SHE"
  - "SHE'S"
  - "SHES"
  - "WE"
  - "WE'RE"
  - "WERE"
  - "WE'VE"
  - "WEVE"
  - "WE'LL"
  - "WELL"
  - "THEY"
  - "THEY'RE"
  - "THEYRE"
  - "THEY'VE"
  - "THEYVE"
  - "IT"
  - "IT'S"
  - "ITS"
  - "US"
  
  # === Common Articles & Conjunctions ===
  - "THE"
  - "A"
  - "AN"
  - "AND"
  - "BUT"
  - "OR"
  - "FOR"
  - "NOR"
  - "SO"
  - "YET"
  - "AS"
  - "IF"
  - "THEN"
  
  # === Prepositions ===
  - "TO"
  - "OF"
  - "IN"
  - "ON"
  - "AT"
  - "BY"
  - "WITH"
  - "FROM"
  - "ABOUT"
  
  # === Common Verbs ===
  - "IS"
  - "ARE"
  - "WAS"
  - "WERE"
  - "BE"
  - "BEEN"
  - "BEING"
  - "AM"
  - "HAVE"
  - "HAS"
  - "HAD"
  - "DO"
  - "DOES"
  - "DID"
  - "CAN"
  - "CAN'T"
  - "CANT"
  - "COULD"
  - "WOULD"
  - "SHOULD"
  - "WILL"
  - "MUST"
  - "MAY"
  - "MIGHT"
  - "GET"
  - "GOT"
  - "GIVE"
  - "GAVE"
  - "TAKE"
  - "NEED"
  - "WANT"
  
  # === Yes/No & Affirmatives ===
  - "YES"
  - "NO"
  - "YEAH"
  - "YEP"
  - "OKAY"
  - "OK"
  - "SURE"
  
  # === Polite/Social Words ===
  - "PLEASE"
  - "THANK"
  - "THANKS"
  - "SORRY"
  - "HELLO"
  - "HI"
  - "GOODBYE"
  - "BYE"
  
  # === Question Words ===
  - "WHAT"
  - "WHERE"
  - "WHEN"
  - "WHO"
  - "WHY"
  - "HOW"
  - "WHICH"
  
  # === Location/Direction Words ===
  - "HERE"
  - "THERE"
  - "THIS"
  - "THAT"
  - "THESE"
  - "THOSE"
  - "NOW"
  
  # === Common Adjectives/Adverbs ===
  - "NEW"
  - "ONE"
  - "JUST"
  - "WELL"
  - "BACK"
  - "ELSE"
  - "RIGHT"
  - "NOT"
  - "COMPLETELY"
  - "TOTALLY"
  - "REALLY"
  - "VERY"
  - "QUITE"
  - "ALWAYS"
  - "NEVER"
  - "MAYBE"
  - "PERHAPS"
  - "CERTAINLY"
  - "DEFINITELY"
  - "ABSOLUTELY"
  
  # === Conversational/Filler Words ===
  - "UH"
  - "UM"
  - "GOODNESS"
  - "SAKE"
  - "WAIT"
  - "LISTEN"
  - "LOOK"
  
  # === Communication Verbs ===
  - "CALL"
  - "RING"
  - "SPEAK"
  - "TALK"
  - "TELL"
  - "SAY"
  - "SAID"
  - "HEAR"
  - "HEARD"
  - "ASK"
  - "ASKED"
  
  # === Service/Business Words ===
  - "HELP"
  - "ACCEPT"
  - "KNOW"
  - "TOLD"
  - "ENGINEER"
  - "SKY"
  - "BUSINESS"
  - "SERVICE"
  - "CUSTOMER"
  
  # === Device/Technology Words ===
  - "TABLET"
  - "PHONE"
  - "MOBILE"
  - "COMPUTER"
  - "LAPTOP"
  - "DEVICE"
  
  # === Password Context (for password recognizer) ===
  - "PASSWORD"
  - "WRITTEN"
  - "DOWN"
  - "SOMEWHERE"
  - "CHECK"
  - "LET"

# ============================================================================
# VALIDATION SETTINGS
# ============================================================================
validation:
  person_entity:
    # For PERSON entities from SpacyRecognizer (not in stateful context):
    # Calculate ratio of conversational words in detected text
    # Reject if ratio exceeds this threshold
    max_conversational_ratio: 0.5  # 50% - tune this based on false positives
    enabled: true

# ============================================================================
# DETECTION SCORE SETTINGS
# ============================================================================
# Configure confidence scores for entity detection and filtering
# ============================================================================
detection_scores:
  # Minimum score threshold - filter out detections below this score
  min_score_threshold: 0.7
  
  # Recognition confidence scores by pattern type
  recognizer_scores:
    # High confidence: Explicit context-based detection
    high_confidence: 0.95
    
    # High confidence variant: Self-introduction patterns
    very_high_confidence: 0.98
    
    # Medium-high confidence: Direct patterns with clear indicators
    medium_high_confidence: 0.92
    
    # Medium confidence: Patterns with some ambiguity
    medium_confidence: 0.90
    
    # Lower confidence: Fallback patterns
    low_confidence: 0.80

# ============================================================================
# SPOKEN NUMBER WORDS
# ============================================================================
# Comprehensive list of spoken number words used across all recognizers
# Includes standard numbers (0-100) and phone-specific words (OH, DOUBLE, TRIPLE)
# ============================================================================
number_words:
  - ZERO
  - ONE
  - TWO
  - THREE
  - FOUR
  - FIVE
  - SIX
  - SEVEN
  - EIGHT
  - NINE
  - TEN
  - ELEVEN
  - TWELVE
  - THIRTEEN
  - FOURTEEN
  - FIFTEEN
  - SIXTEEN
  - SEVENTEEN
  - EIGHTEEN
  - NINETEEN
  - TWENTY
  - THIRTY
  - FORTY
  - FIFTY
  - SIXTY
  - SEVENTY
  - EIGHTY
  - NINETY
  - HUNDRED
  - OH        # Phone numbers: "OH SEVEN" = 07
  - DOUBLE    # Phone numbers: "DOUBLE SEVEN" = 77
  - TRIPLE    # Phone numbers: "TRIPLE FIVE" = 555
