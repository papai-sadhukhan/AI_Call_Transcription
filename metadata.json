{
  "name": "PII Redaction Dataflow Pipeline",
  "description": "Flex Template for redacting PII from BigQuery conversation transcripts using Presidio and custom recognizers",
  "parameters": [
    {
      "name": "config_path",
      "label": "Configuration File Path",
      "helpText": "Path to the JSON configuration file (local or GCS path like gs://bucket/config.json)",
      "isOptional": false,
      "regexes": ["^.+\\.json$"],
      "paramType": "TEXT"
    },
    {
      "name": "runner",
      "label": "Pipeline Runner",
      "helpText": "The runner to use for executing the pipeline (DataflowRunner or DirectRunner)",
      "isOptional": true,
      "regexes": ["^(DataflowRunner|DirectRunner)$"],
      "paramType": "TEXT"
    },
    {
      "name": "log_level",
      "label": "Logging Level",
      "helpText": "Logging level for the pipeline (DEBUG, INFO, WARNING, ERROR, CRITICAL)",
      "isOptional": true,
      "regexes": ["^(DEBUG|INFO|WARNING|ERROR|CRITICAL)$"],
      "paramType": "TEXT"
    },
    {
      "name": "project",
      "label": "GCP Project ID",
      "helpText": "Google Cloud Project ID for Dataflow job execution",
      "isOptional": true,
      "regexes": ["^[a-z][a-z0-9-]{4,28}[a-z0-9]$"],
      "paramType": "TEXT"
    },
    {
      "name": "region",
      "label": "GCP Region",
      "helpText": "Google Cloud region for Dataflow job execution (e.g., europe-west1)",
      "isOptional": true,
      "regexes": ["^[a-z]+-[a-z]+[0-9]$"],
      "paramType": "TEXT"
    },
    {
      "name": "staging_location",
      "label": "Staging Location",
      "helpText": "GCS bucket path for staging files (gs://bucket/staging)",
      "isOptional": true,
      "regexes": ["^gs:\\/\\/.+"],
      "paramType": "GCS_READ_BUCKET"
    },
    {
      "name": "temp_location",
      "label": "Temp Location",
      "helpText": "GCS bucket path for temporary files (gs://bucket/temp)",
      "isOptional": true,
      "regexes": ["^gs:\\/\\/.+"],
      "paramType": "GCS_READ_BUCKET"
    },
    {
      "name": "service_account_email",
      "label": "Service Account Email",
      "helpText": "Service account email for Dataflow workers",
      "isOptional": true,
      "regexes": ["^.+@.+\\.iam\\.gserviceaccount\\.com$"],
      "paramType": "TEXT"
    },
    {
      "name": "subnetwork",
      "label": "Subnetwork",
      "helpText": "Full subnetwork URL for Dataflow workers",
      "isOptional": true,
      "regexes": ["^https:\\/\\/www\\.googleapis\\.com\\/compute\\/v1\\/projects\\/.+"],
      "paramType": "TEXT"
    },
    {
      "name": "max_num_workers",
      "label": "Maximum Number of Workers",
      "helpText": "Maximum number of Dataflow workers",
      "isOptional": true,
      "regexes": ["^[0-9]+$"],
      "paramType": "TEXT"
    },
    {
      "name": "machine_type",
      "label": "Machine Type",
      "helpText": "Machine type for Dataflow workers (e.g., n1-standard-4)",
      "isOptional": true,
      "regexes": ["^[a-z0-9-]+$"],
      "paramType": "TEXT"
    }
  ],
  "streaming": false,
  "supportsAtLeastOnce": false,
  "supportsExactlyOnce": false,
  "defaultEnvironment": {}
}
